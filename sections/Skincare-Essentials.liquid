{{ 'skincare-essentials.css' | asset_url | stylesheet_tag }}

<style>
    .skincare-essentials-{{ section.id }} {
    margin-bottom: {{ section.settings.section_margin_bottom }}px;
    padding-top: {{ section.settings.section_padding_top }}px;
    padding-bottom: {{ section.settings.section_padding_bottom }}px;
  }
  @media (max-width: 767px) {
    .skincare-essentials-{{ section.id }} {
      margin-bottom: {{ section.settings.section_margin_bottom_mobile }}px;
      padding-top: {{ section.settings.section_padding_top_mobile }}px;
      padding-bottom: {{ section.settings.section_padding_bottom_mobile }}px;
    }
  }
</style>
<section class="skincare-essentials skincare-essentials-{{ section.id }}">
  <div class="hero-wrapper">
    <picture>
      <source media="(max-width: 768px)" srcset="https://cdn.shopify.com/s/files/1/0702/2057/9035/files/beauty-portrait-mystery-smiling-ginger-woman-with-long-hair-posing-sideways-looking_2.png?v=1758013992">
      <img
        height=""
        width=""
        src="https://cdn.shopify.com/s/files/1/0702/2057/9035/files/Mask_group_16.png?v=1756888694"
        alt="Skincare Essentials">
    </picture>

    <div class="overlay">
      <div class="heading">
        <h3>{{ section.settings.heading_top }}</h3>
        <h1>{{ section.settings.heading_main }}</h1>
      </div>

      <div class="toggle-buttons">
        <button class="toggle active">MEN</button>
        <button class="toggle">WOMEN</button>
      </div>

      <!-- Men Swiper -->
      <div class="swiper product-swiper men-swiper">
        <div class="swiper-wrapper">
          {% for block in section.blocks %}
            {% assign prod = block.settings.product %}
            {% if prod != blank %}
              {% assign gender = prod.metafields.custom.gender | downcase %}
              {% if gender == 'men' %}
                <div class="swiper-slide" data-gender="{{ gender }}">
                  <div class="product-card">
                    {% if prod.featured_image != blank %}
                      {{ prod.featured_image
 | image_url: width: 300
 | image_tag: class: 'liquid-image', alt: prod.title
                      }}
                    {% elsif prod.images.size > 0 %}
                      {{ prod.images[0] | image_url: width: 300 | image_tag: class: 'liquid-image', alt: prod.title }}
                    {% endif %}

                    <h4>{{ prod.title | strip_html | split: ' ' | slice: 0, 2 | join: ' ' }}</h4>
                    <p class="product-desc">
                      {{ prod.description | strip_html | split: ' ' | slice: 0, 2 | join: ' ' }}
                    </p>
                    <p class="price">
                      {% if prod.selected_or_first_available_variant != blank %}
                        {{ prod.selected_or_first_available_variant.price | money }}
                      {% else %}
                        {{ prod.price | money }}
                      {% endif %}
                    </p>
                    <button class="add-to-bag">ADD TO BAG</button>
                  </div>
                </div>
              {% endif %}
            {% endif %}
          {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
      </div>

      <!-- Women Swiper -->
      <div class="swiper product-swiper women-swiper">
        <div class="swiper-wrapper">
          {% for block in section.blocks %}
            {% assign prod = block.settings.product %}
            {% if prod != blank %}
              {% assign gender = prod.metafields.custom.gender | downcase %}
              {% if gender == 'women' %}
                <div class="swiper-slide" data-gender="{{ gender }}">
                  <div class="product-card">
                    {{ prod.featured_image
 | image_url: width: 300
 | image_tag: class: 'liquid-image', alt: prod.title
                    }}
                    <h4>{{ prod.title | strip_html | split: ' ' | slice: 0, 2 | join: ' ' }}</h4>
                    <p class="product-desc">
                      {{ prod.description | strip_html | split: ' ' | slice: 0, 2 | join: ' ' }}
                    </p>
                    <p class="price">
                      {% if prod.selected_or_first_available_variant != blank %}
                        {{ prod.selected_or_first_available_variant.price | money }}
                      {% else %}
                        {{ prod.price | money }}
                      {% endif %}
                    </p>
                    <button class="add-to-bag">ADD TO BAG</button>
                  </div>
                </div>
              {% endif %}
            {% endif %}
          {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
      </div>
    </div>
  </div>
</section>

<!-- Swiper CSS + JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // MEN Swiper
    new Swiper('.product-swiper.men-swiper', {
      slidesPerView: 2,
      spaceBetween: 0,
      pagination: {
        el: '.men-swiper .swiper-pagination',
        clickable: true,
      },
      breakpoints: {
        480: { slidesPerView: 1.5, spaceBetween: 10 },
        640: { slidesPerView: 1.5, spaceBetween: 10 },
        1024: { slidesPerView: 2, spaceBetween: 0 },
        1280: { slidesPerView: 3, spaceBetween: 10 },
      },
    });
  
    // WOMEN Swiper
    new Swiper('.product-swiper.women-swiper', {
      slidesPerView: 2,
      spaceBetween: 0,
      pagination: {
        el: '.women-swiper .swiper-pagination',
        clickable: true,
      },
      breakpoints: {
        480: { slidesPerView: 1.5, spaceBetween: 10 },
        640: { slidesPerView: 1.5, spaceBetween: 10 },
        1024: { slidesPerView: 2, spaceBetween: 0 },
        1280: { slidesPerView: 3, spaceBetween: 10 },
      },
    });
  
    // Gender toggle filter
    const buttons = document.querySelectorAll('.toggle');
    const menSwiper = document.querySelector('.men-swiper');
    const womenSwiper = document.querySelector('.women-swiper');
  
    // hide women by default
    womenSwiper.style.display = 'none';
  
    buttons.forEach((btn) => {
      btn.addEventListener('click', () => {
        buttons.forEach((b) => b.classList.remove('active'));
        btn.classList.add('active');
  
        if (btn.textContent.trim().toLowerCase() === 'men') {
          menSwiper.style.display = 'block';
          womenSwiper.style.display = 'none';
        } else {
          menSwiper.style.display = 'none';
          womenSwiper.style.display = 'block';
        }
      });
    });
  });
</script>

{% schema %}
  {
    "name": "Skincare Essentials",
    "settings": [
      {
        "type": "header",
        "content": "Spacing - Desktop"
      },
      {
        "type": "range",
        "id": "section_margin_bottom",
        "min": 0,
        "max": 100,
        "step": 5,
        "unit": "px",
        "label": "Section margin-bottom",
        "default": 0
      },
      {
        "type": "range",
        "id": "section_padding_top",
        "min": 10,
        "max": 60,
        "step": 2,
        "unit": "px",
        "label": "Inner Spacing Top padding",
        "default": 10
      },
      {
        "type": "range",
        "id": "section_padding_bottom",
        "min": 10,
        "max": 60,
        "step": 2,
        "unit": "px",
        "label": "Inner Spacing Bottom padding",
        "default": 10
      }, {
        "type": "header",
        "content": "Spacing - Mobile"
      }, {
        "type": "range",
        "id": "section_margin_bottom_mobile",
        "min": 0,
        "max": 100,
        "step": 5,
        "unit": "px",
        "label": "Section Spacing margin_bottom",
        "default": 0
      }, {
        "type": "range",
        "id": "section_padding_top_mobile",
        "min": 10,
        "max": 60,
        "step": 2,
        "unit": "px",
        "label": "Inner Spacing padding Top",
        "default": 20
      }, {
        "type": "range",
        "id": "section_padding_bottom_mobile",
        "min": 10,
        "max": 60,
        "step": 2,
        "unit": "px",
        "label": "Inner Spacing padding Bottom",
        "default": 20
      }, {
        "type": "text",
        "id": "heading_top",
        "label": "heading Top (H1)",
        "default": "SKINCARE"
      }, {
        "type": "text",
        "id": "heading_main",
        "label": "heading main (H3)",
        "default": "ESSENTIALS"
      }
    ],
    "blocks": [
      {
        "type": "product_card",
        "name": "Product Card",
        "settings": [
          {
            "type": "product",
            "id": "product",
            "label": "Product"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Skincare Essentials"
      }
    ]
  }
{% endschema %}